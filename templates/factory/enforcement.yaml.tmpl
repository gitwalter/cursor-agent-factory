# {{PROJECT_NAME}} - Enforcement Configuration
#
# Generated by Cursor Agent Factory
# Philosophy: Values without enforcement are just aspirations.
#
# These enforcement patterns ensure our values are lived, not just stated.
# Each enforcement traces to our foundational axioms.

metadata:
  project: "{{PROJECT_NAME}}"
  generated: "{{GENERATION_DATE}}"
  version: "1.0.0"

# Quality Enforcement - Craftsmanship Standards
quality:
  E1_test_coverage:
    name: "Test Coverage Gate"
    enabled: {{E1_ENABLED}}
    description: "Ensures code is verified through tests"
    axiom_basis: ["A1_verifiability"]
    thresholds:
      minimum_coverage: {{TEST_COVERAGE_THRESHOLD}}
      new_code_coverage: {{NEW_CODE_COVERAGE_THRESHOLD}}
    severity: "{{E1_SEVERITY}}"
    override_policy: "{{E1_OVERRIDE}}"
    trigger: "before_merge"
    
  E2_code_review:
    name: "Peer Review Gate"
    enabled: {{E2_ENABLED}}
    description: "Ensures collaborative refinement"
    axiom_basis: ["A1_verifiability", "A3_transparency"]
    requirements:
      min_reviewers: {{MIN_REVIEWERS}}
      require_approval: {{REQUIRE_APPROVAL}}
      resolve_comments: {{RESOLVE_COMMENTS}}
    severity: "blocking"
    override_policy: "{{E2_OVERRIDE}}"
    trigger: "before_merge"
    
  E3_documentation:
    name: "Documentation Completeness"
    enabled: {{E3_ENABLED}}
    description: "Ensures knowledge is shared"
    axiom_basis: ["A3_transparency"]
    requirements:
      public_api_documented: true
      readme_current: true
    severity: "warning"
    override_policy: "with_justification"
    trigger: "before_feature_complete"
    
  E4_style_consistency:
    name: "Code Style Consistency"
    enabled: {{E4_ENABLED}}
    description: "Ensures harmony in the details"
    axiom_basis: ["A5_consistency"]
    checks:
      linter_pass: true
      formatter_applied: true
      type_hints_present: {{TYPE_HINTS_REQUIRED}}
    severity: "blocking"
    override_policy: "never"
    trigger: "before_commit"

# Safety Enforcement - Protection Mechanisms
safety:
  E5_destructive_confirmation:
    name: "Destructive Action Confirmation"
    enabled: {{E5_ENABLED}}
    description: "Prevents accidental harm"
    axiom_basis: ["A4_non_harm", "A2_user_primacy"]
    patterns:
      - "delete"
      - "drop"
      - "remove"
      - "destroy"
      - "truncate"
      - "purge"
      - "overwrite"
      - "format"
    requirements:
      display_consequences: true
      explicit_confirmation: true
    severity: "blocking"
    override_policy: "never"
    trigger: "before_destructive_action"
    
  E6_backup_before_change:
    name: "Backup Before Modification"
    enabled: {{E6_ENABLED}}
    description: "Enables recovery from mistakes"
    axiom_basis: ["A4_non_harm", "A7_reversibility"]
    requirements:
      backup_created: true
      backup_verified: {{VERIFY_BACKUPS}}
    severity: "blocking"
    override_policy: "with_approval"
    trigger: "before_critical_modification"
    
  E7_security_scan:
    name: "Security Vulnerability Check"
    enabled: {{E7_ENABLED}}
    description: "Protects against known threats"
    axiom_basis: ["A4_non_harm"]
    checks:
      no_critical_vulnerabilities: true
      no_high_vulnerabilities: {{BLOCK_HIGH_VULNS}}
      no_exposed_secrets: true
    severity: "blocking"
    override_policy: "with_approval"
    trigger: "before_deployment"
    
  E8_production_safeguard:
    name: "Production Environment Safeguard"
    enabled: {{E8_ENABLED}}
    description: "Extra care for production"
    axiom_basis: ["A4_non_harm", "A2_user_primacy"]
    requirements:
      environment_confirmation: true
      staging_tested: true
      rollback_ready: true
    severity: "blocking"
    override_policy: "with_approval"
    trigger: "before_production_change"

# Integrity Enforcement - Alignment Mechanisms
integrity:
  E9_axiom_compliance:
    name: "Axiom Compliance Check"
    enabled: {{E9_ENABLED}}
    description: "Ensures rules trace to axioms"
    axiom_basis: ["A5_consistency"]
    checks:
      axiom_traceable: true
      no_axiom_contradiction: true
      derivation_valid: true
    severity: "blocking"
    override_policy: "never"
    trigger: "when_rules_proposed"
    
  E10_purpose_alignment:
    name: "Purpose Alignment Check"
    enabled: {{E10_ENABLED}}
    description: "Ensures work serves mission"
    axiom_basis: ["A2_user_primacy", "A5_consistency"]
    checks:
      serves_stakeholders: true
      aligns_with_mission: true
    severity: "advisory"
    override_policy: "with_justification"
    trigger: "major_feature_proposal"
    
  E11_transparency_log:
    name: "Decision Transparency Log"
    enabled: {{E11_ENABLED}}
    description: "Ensures decisions are documented"
    axiom_basis: ["A3_transparency"]
    requirements:
      decision_documented: true
      alternatives_considered: {{LOG_ALTERNATIVES}}
    severity: "advisory"
    override_policy: "with_justification"
    trigger: "significant_decision"

# Override Log - When exceptions are made
override_log:
  format: |
    ## Override Record
    
    **Enforcement**: {enforcement_id}
    **Date**: {date}
    **Override by**: {person}
    **Justification**: {justification}
    **Approval**: {approver} (if required)
    **Follow-up**: {follow_up_action}
    **Deadline**: {deadline}

# Integration Hooks
integration:
  ci_cd:
    pre_commit:
      - E4_style_consistency
    pre_merge:
      - E1_test_coverage
      - E2_code_review
    pre_deploy:
      - E7_security_scan
      - E8_production_safeguard
  
  agent_hooks:
    before_destructive: E5_destructive_confirmation
    before_rule_change: E9_axiom_compliance
    before_feature: E10_purpose_alignment

---
# Philosophy
#
# These enforcements are not bureaucracy - they are how we ensure
# our values are lived, not just stated. Each one traces to our
# foundational axioms and serves our purpose.
#
# Excellence emerges from consistent discipline.
