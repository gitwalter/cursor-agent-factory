package {{PACKAGE_NAME}}.steps;

import io.cucumber.java.Before;
import io.cucumber.java.After;
import io.cucumber.java.en.Given;
import io.cucumber.java.en.When;
import io.cucumber.java.en.Then;
import io.cucumber.java.en.And;

import static org.junit.jupiter.api.Assertions.*;

/**
 * Step definitions for {{FEATURE_NAME}} feature.
 *
 * Generated by Cursor Agent Factory - BDD Skill
 * Framework: Cucumber-JVM (Java)
 */
public class {{CLASS_NAME}}Steps {

    // Shared state between steps
    private String inputValue;
    private String result;
    private String errorMessage;

    // ========================================================================
    // Hooks
    // ========================================================================

    @Before
    public void setUp() {
        // Reset state before each scenario
        this.inputValue = null;
        this.result = null;
        this.errorMessage = null;
    }

    @After
    public void tearDown() {
        // Cleanup after each scenario
    }

    // ========================================================================
    // Given Steps - Setup and Preconditions
    // ========================================================================

    @Given("{{COMMON_PRECONDITION}}")
    public void commonPrecondition() {
        /**
         * Set up common preconditions for all scenarios.
         */
        // TODO: Implement precondition setup
    }

    @Given("{{GIVEN_CLAUSE}}")
    public void givenMainSetup() {
        /**
         * Set up the initial state for the scenario.
         */
        // TODO: Implement given step
    }

    @Given("{{OUTLINE_GIVEN_CLAUSE}} with {string}")
    public void givenWithInput(String inputValue) {
        /**
         * Set up state with parameterized input.
         */
        this.inputValue = inputValue;
        // TODO: Implement parameterized setup
    }

    // ========================================================================
    // When Steps - Actions
    // ========================================================================

    @When("{{WHEN_CLAUSE}}")
    public void whenAction() {
        /**
         * Execute the main action being tested.
         */
        // TODO: Implement action
    }

    @When("{{OUTLINE_WHEN_CLAUSE}}")
    public void whenOutlineAction() {
        /**
         * Execute action for scenario outline.
         */
        // TODO: Implement outline action using this.inputValue
    }

    // ========================================================================
    // Then Steps - Assertions
    // ========================================================================

    @Then("{{THEN_CLAUSE}}")
    public void thenVerify() {
        /**
         * Verify the expected outcome.
         */
        // TODO: Implement assertion
        assertTrue(true, "Expected outcome not met");
    }

    @Then("{{OUTLINE_THEN_CLAUSE}} should be {string}")
    public void thenVerifyResult(String expectedResult) {
        /**
         * Verify parameterized expected result.
         */
        assertEquals(expectedResult, this.result,
            String.format("Expected %s, got %s", expectedResult, this.result));
    }

    @Then("an appropriate error message should be displayed")
    public void thenErrorMessage() {
        /**
         * Verify that an error message is displayed.
         */
        assertNotNull(this.errorMessage, "Expected error message but none was displayed");
        assertFalse(this.errorMessage.isEmpty(), "Error message should not be empty");
    }

    // ========================================================================
    // Shared/Reusable Steps
    // ========================================================================

    @And("I wait for {int} seconds")
    public void waitForSeconds(int seconds) throws InterruptedException {
        /**
         * Wait for specified duration (use sparingly).
         */
        Thread.sleep(seconds * 1000L);
    }

    @And("I log {string}")
    public void logMessage(String message) {
        /**
         * Log a debug message during scenario execution.
         */
        System.out.println("[BDD LOG] " + message);
    }
}
