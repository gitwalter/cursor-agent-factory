/**
 * Step definitions for {{FEATURE_NAME}} feature.
 *
 * Generated by Cursor Agent Factory - BDD Skill
 * Framework: Cucumber.js (TypeScript)
 */

import { Given, When, Then, Before, After } from '@cucumber/cucumber';
import { expect } from 'chai';

// World context interface for sharing state between steps
interface World {
  inputValue?: string;
  result?: string;
  errorMessage?: string;
}

// ============================================================================
// Hooks
// ============================================================================

Before(async function (this: World) {
  // Reset state before each scenario
  this.inputValue = undefined;
  this.result = undefined;
  this.errorMessage = undefined;
});

After(async function (this: World) {
  // Cleanup after each scenario
});

// ============================================================================
// Given Steps - Setup and Preconditions
// ============================================================================

Given('{{COMMON_PRECONDITION}}', async function (this: World) {
  /**
   * Set up common preconditions for all scenarios.
   */
  // TODO: Implement precondition setup
});

Given('{{GIVEN_CLAUSE}}', async function (this: World) {
  /**
   * Set up the initial state for the scenario.
   */
  // TODO: Implement given step
});

Given('{{OUTLINE_GIVEN_CLAUSE}} with {string}', async function (this: World, inputValue: string) {
  /**
   * Set up state with parameterized input.
   */
  this.inputValue = inputValue;
  // TODO: Implement parameterized setup
});

// ============================================================================
// When Steps - Actions
// ============================================================================

When('{{WHEN_CLAUSE}}', async function (this: World) {
  /**
   * Execute the main action being tested.
   */
  // TODO: Implement action
});

When('{{OUTLINE_WHEN_CLAUSE}}', async function (this: World) {
  /**
   * Execute action for scenario outline.
   */
  // TODO: Implement outline action using this.inputValue
});

// ============================================================================
// Then Steps - Assertions
// ============================================================================

Then('{{THEN_CLAUSE}}', async function (this: World) {
  /**
   * Verify the expected outcome.
   */
  // TODO: Implement assertion
  expect(true).to.be.true;
});

Then('{{OUTLINE_THEN_CLAUSE}} should be {string}', async function (this: World, expectedResult: string) {
  /**
   * Verify parameterized expected result.
   */
  expect(this.result).to.equal(expectedResult);
});

Then('an appropriate error message should be displayed', async function (this: World) {
  /**
   * Verify that an error message is displayed.
   */
  expect(this.errorMessage).to.not.be.undefined;
  expect(this.errorMessage).to.not.be.empty;
});

// ============================================================================
// Shared/Reusable Steps
// ============================================================================

Given('I wait for {int} seconds', async function (this: World, seconds: number) {
  /**
   * Wait for specified duration (use sparingly).
   */
  await new Promise(resolve => setTimeout(resolve, seconds * 1000));
});

Given('I log {string}', async function (this: World, message: string) {
  /**
   * Log a debug message during scenario execution.
   */
  console.log(`[BDD LOG] ${message}`);
});
