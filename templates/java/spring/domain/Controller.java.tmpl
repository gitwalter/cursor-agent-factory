package {{PACKAGE_NAME}}.domain;

import jakarta.validation.Valid;
import jakarta.validation.constraints.NotNull;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

/**
 * {{CLASS_NAME}} - REST Controller
 * 
 * Purpose: {{CONTROLLER_PURPOSE}}
 * Author: {{AUTHOR}}
 * Created: {{DATE}}
 * 
 * Handles HTTP requests for {{DOMAIN_NAME}} operations.
 * Provides validation, error handling, and proper HTTP status codes.
 */
@Slf4j
@RestController
@RequestMapping("/api/v1/{{RESOURCE_PATH}}")
@RequiredArgsConstructor
public class {{CLASS_NAME}}Controller {

    private final {{CLASS_NAME}}Service {{SERVICE_VAR_NAME}};

    /**
     * Create a new {{DOMAIN_NAME}}.
     * 
     * @param request DTO containing creation data
     * @return Created entity with HTTP 201 status
     */
    @PostMapping
    public ResponseEntity<{{CLASS_NAME}}ResponseDto> create(
            @Valid @RequestBody {{CLASS_NAME}}CreateRequestDto request) {
        log.info("Creating new {{DOMAIN_NAME}}: {}", request);
        
        {{CLASS_NAME}}ResponseDto response = {{SERVICE_VAR_NAME}}.create(request);
        
        return ResponseEntity
                .status(HttpStatus.CREATED)
                .body(response);
    }

    /**
     * Get {{DOMAIN_NAME}} by ID.
     * 
     * @param id Entity identifier
     * @return Entity with HTTP 200 status
     */
    @GetMapping("/{id}")
    public ResponseEntity<{{CLASS_NAME}}ResponseDto> getById(
            @PathVariable @NotNull Long id) {
        log.info("Fetching {{DOMAIN_NAME}} with id: {}", id);
        
        {{CLASS_NAME}}ResponseDto response = {{SERVICE_VAR_NAME}}.getById(id);
        
        return ResponseEntity.ok(response);
    }

    /**
     * Get all {{DOMAIN_NAME}} entities (with pagination).
     * 
     * @param page Page number (0-indexed)
     * @param size Page size
     * @return List of entities with HTTP 200 status
     */
    @GetMapping
    public ResponseEntity<List<{{CLASS_NAME}}ResponseDto>> getAll(
            @RequestParam(defaultValue = "0") int page,
            @RequestParam(defaultValue = "20") int size) {
        log.info("Fetching all {{DOMAIN_NAME}} entities - page: {}, size: {}", page, size);
        
        List<{{CLASS_NAME}}ResponseDto> response = {{SERVICE_VAR_NAME}}.getAll(page, size);
        
        return ResponseEntity.ok(response);
    }

    /**
     * Update existing {{DOMAIN_NAME}}.
     * 
     * @param id Entity identifier
     * @param request DTO containing update data
     * @return Updated entity with HTTP 200 status
     */
    @PutMapping("/{id}")
    public ResponseEntity<{{CLASS_NAME}}ResponseDto> update(
            @PathVariable @NotNull Long id,
            @Valid @RequestBody {{CLASS_NAME}}UpdateRequestDto request) {
        log.info("Updating {{DOMAIN_NAME}} with id: {}", id);
        
        {{CLASS_NAME}}ResponseDto response = {{SERVICE_VAR_NAME}}.update(id, request);
        
        return ResponseEntity.ok(response);
    }

    /**
     * Delete {{DOMAIN_NAME}} by ID.
     * 
     * @param id Entity identifier
     * @return HTTP 204 No Content on success
     */
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> delete(@PathVariable @NotNull Long id) {
        log.info("Deleting {{DOMAIN_NAME}} with id: {}", id);
        
        {{SERVICE_VAR_NAME}}.delete(id);
        
        return ResponseEntity.noContent().build();
    }
}
