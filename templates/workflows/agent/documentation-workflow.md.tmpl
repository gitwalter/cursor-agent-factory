# Documentation Generation Workflow

## Overview

This workflow generates and maintains comprehensive project documentation including API documentation, usage examples, README updates, and changelog entries. The workflow analyzes the codebase to extract documentation-relevant information and produces well-structured documentation artifacts.

**Project:** {{PROJECT_NAME}}  
**Methodology:** {{METHODOLOGY}}  
**Stack:** {{STACK}}

## Trigger Conditions

This workflow is activated when:

- Documentation is explicitly requested
- New feature is implemented
- API endpoints are added or modified
- Before release milestones
- Architecture decisions are made
- Onboarding new team members

**Trigger Examples:**
- "Generate documentation for {{FEATURE_NAME}}"
- "Update API docs"
- "Create README for {{MODULE_NAME}}"
- "Document {{API_ENDPOINT}}"
- "Generate changelog"

## Workflow Steps

### Step 1: Analyze Codebase

**Description:** Scan and understand the current codebase structure to identify what needs documentation.

**Actions:**
- Identify project structure and entry points
- Detect frameworks, languages, and patterns used
- Find existing documentation to update
- Identify public APIs and interfaces
- Locate configuration files and environment variables
- Find dependencies and their purposes

**MCP Tools Used:**
- `deepwiki-read_wiki_structure` - Understand existing documentation
- `deepwiki-read_wiki_contents` - Read current documentation

**Skills Invoked:**
- `code-analysis` - Analyze code structure

**Outputs:**
- Project structure map
- Framework/language detection
- Existing documentation inventory
- API endpoint list

**Is Mandatory:** Yes

---

### Step 2: Generate API Documentation

**Description:** Extract and document API endpoints, methods, and contracts.

**Actions:**
- Parse function/method signatures
- Extract docstrings and comments
- Identify request/response schemas
- Document parameters and return types
- Generate OpenAPI/Swagger specs (if applicable)
- Create usage examples for each endpoint

**Skills Invoked:**
- `documentation-generation` - Generate structured documentation
- `code-templates` - Use API documentation templates

**Knowledge Files:**
- `knowledge/api-patterns.json` - API documentation patterns
- `knowledge/{{STACK}}-patterns.json` - Stack-specific API patterns

**Outputs:**
- API documentation files
- OpenAPI/Swagger specification
- Endpoint usage examples

**Is Mandatory:** Yes (if APIs exist)

---

### Step 3: Create Usage Examples

**Description:** Generate practical usage examples and code snippets.

**Actions:**
- Create quick start examples
- Generate code snippets for common use cases
- Document configuration examples
- Create integration examples
- Generate troubleshooting examples

**Skills Invoked:**
- `documentation-generation` - Generate examples
- `code-templates` - Use example templates

**Knowledge Files:**
- `knowledge/{{STACK}}-patterns.json` - Stack-specific examples

**Outputs:**
- Usage example files
- Code snippets
- Configuration examples

**Is Mandatory:** Yes

---

### Step 4: Update README

**Description:** Generate or update the main README.md with project overview and quick start guide.

**Actions:**
- Write project overview
- Document features
- Create installation instructions
- Write quick start guide
- Document configuration options
- Add contributing guidelines
- Include license information
- Add badges and links

**Skills Invoked:**
- `documentation-generation` - Generate README content

**Outputs:**
- Updated `README.md`
- Project badges
- Quick start guide

**Is Mandatory:** Yes

---

### Step 5: Generate Changelog

**Description:** Create or update changelog with recent changes and version history.

**Actions:**
- Analyze git history for changes
- Categorize changes (Added, Changed, Fixed, Removed)
- Format according to Keep a Changelog format
- Link to related issues/PRs
- Add version numbers and dates

**Skills Invoked:**
- `documentation-generation` - Generate changelog

**Outputs:**
- Updated `CHANGELOG.md`
- Version entries
- Change summaries

**Is Mandatory:** No (but recommended)

---

## Documentation Types

### README Documentation
**Sections:**
- Overview
- Features
- Installation
- Quick Start
- Configuration
- Usage Examples
- Contributing
- License

**Location:** `README.md`

---

### API Documentation
**Formats:**
- OpenAPI/Swagger (YAML/JSON)
- JSDoc (JavaScript/TypeScript)
- XML Comments (C#)
- Sphinx (Python)
- JavaDoc (Java)

**Sections:**
- Endpoint descriptions
- Request/response schemas
- Authentication
- Error codes
- Rate limiting
- Examples

**Location:** `docs/api/` or inline with code

---

### Architecture Decision Records (ADR)
**Sections:**
- Title
- Status (Proposed, Accepted, Deprecated)
- Context
- Decision
- Consequences

**Location:** `docs/adr/`

---

### Setup Guide
**Sections:**
- Prerequisites
- Installation
- Configuration
- Running
- Testing
- Troubleshooting

**Location:** `docs/setup.md`

---

### Usage Examples
**Types:**
- Quick start
- Common use cases
- Advanced examples
- Integration examples
- Configuration examples

**Location:** `docs/examples/`

---

## MCP Tools Reference

| Tool | Purpose | When Used |
|------|---------|-----------|
| `deepwiki-read_wiki_structure` | Understand doc structure | Step 1 |
| `deepwiki-read_wiki_contents` | Read existing docs | Step 1 |
| `deepwiki-ask_question` | Query repository docs | Step 1 |

## Skills Reference

| Skill | Purpose | Steps |
|-------|---------|-------|
| `documentation-generation` | Generate structured docs | 2, 3, 4, 5 |
| `code-analysis` | Analyze code structure | 1 |
| `code-templates` | Use doc templates | 2, 3 |

## Agents Reference

| Agent | Purpose | Steps |
|-------|---------|-------|
| `documentation-agent` | Orchestrate doc generation | All |

## Output Artifacts

| Artifact | Location | Purpose |
|----------|----------|---------|
| README.md | `README.md` | Project overview |
| API docs | `docs/api/` | API reference |
| OpenAPI spec | `docs/api/openapi.yaml` | API specification |
| Usage examples | `docs/examples/` | Code examples |
| Setup guide | `docs/setup.md` | Installation guide |
| Changelog | `CHANGELOG.md` | Version history |
| ADRs | `docs/adr/` | Architecture decisions |

## Documentation Standards

### Markdown Formatting
- Use proper heading hierarchy
- Include table of contents for long docs
- Use code blocks with language tags
- Include links to related documentation
- Use badges for status indicators

### Code Examples
- Include complete, runnable examples
- Show expected output
- Include error handling
- Document prerequisites
- Link to related APIs

### API Documentation
- Document all parameters
- Include type information
- Show request/response examples
- Document error responses
- Include authentication requirements

## Fallback Procedures

| Condition | Action |
|-----------|--------|
| Codebase analysis fails | Request manual structure information |
| Existing docs not found | Create new documentation |
| API extraction unclear | Request manual API list |
| Examples generation fails | Use template examples |
| Changelog generation fails | Request manual change list |

## Example Session

```
User: Generate documentation for user authentication feature

Agent:
1. Analyzing codebase...
   - Found FastAPI application
   - Identified 3 authentication endpoints
2. Generating API documentation...
   - Created OpenAPI spec
   - Documented /auth/login, /auth/register, /auth/refresh
3. Creating usage examples...
   - Quick start example
   - JWT token usage
4. Updating README...
   - Added authentication section
   - Updated quick start guide
5. Generating changelog entry...
   - Added v1.2.0 entry

[Outputs documentation files]
```

## Best Practices

- **Keep it current** - Documentation should reflect actual codebase
- **Be concise** - Write clear, focused documentation
- **Include examples** - Provide runnable code examples
- **Link appropriately** - Cross-reference related documentation
- **Version aware** - Note version compatibility and breaking changes
- **Audience focused** - Write for intended reader (developer, user, operator)
- **Update regularly** - Keep docs in sync with code changes
- **Use templates** - Maintain consistent structure

## Related Workflows

- `feature-development-workflow.md.tmpl` - Document new features
- `code-review-workflow.md.tmpl` - Review documentation quality
- `refactoring-workflow.md.tmpl` - Update docs after refactoring

## References

- `patterns/agents/documentation-agent.json` - Documentation agent definition
- `knowledge/api-patterns.json` - API documentation patterns
- `knowledge/documentation-standards.json` - Documentation standards
- `knowledge/{{STACK}}-patterns.json` - Stack-specific documentation patterns
