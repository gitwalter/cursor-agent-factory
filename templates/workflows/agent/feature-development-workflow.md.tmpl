# Feature Development Workflow

## Overview

This workflow provides an end-to-end feature development process from requirements to deployment, integrating TDD, code review, and documentation workflows. The workflow ensures quality, test coverage, and proper documentation throughout the development lifecycle.

**Project:** {{PROJECT_NAME}}  
**Methodology:** {{METHODOLOGY}}  
**Stack:** {{STACK}}

## Trigger Conditions

This workflow is activated when:

- New feature is requested
- Feature specification is provided
- Ticket/issue assigned for feature development
- User requests "implement feature" or "develop {{FEATURE_NAME}}"

**Trigger Examples:**
- "Implement feature from ticket {{TICKET_ID}}"
- "Develop {{FEATURE_NAME}} feature"
- "Create feature based on {{CONFLUENCE_PAGE_ID}}"
- "Build {{FEATURE_DESCRIPTION}}"

## Workflow Steps

### Step 1: Requirements Analysis

**Description:** Understand and analyze feature requirements from ticket or specification.

**Actions:**
- Fetch ticket/specification details
- Extract functional requirements
- Identify acceptance criteria
- Understand business context
- Identify dependencies
- Clarify ambiguities

**MCP Tools Used:**
- `atlassian-getJiraIssue` (if ticket ID provided)
- `atlassian-getConfluencePage` (if specification page provided)

**Skills Invoked:**
- `requirements-gathering` - Extract and clarify requirements

**Outputs:**
- Requirements document
- Acceptance criteria list
- Dependencies identified
- Business context notes

**Is Mandatory:** Yes

---

### Step 2: Architecture & Design

**Description:** Design the feature architecture and technical approach.

**Actions:**
- Create high-level architecture
- Design component structure
- Define interfaces and contracts
- Plan data model changes
- Identify integration points
- Document design decisions

**Skills Invoked:**
- `code-analysis` - Analyze existing architecture
- `grounding` - Verify data model assumptions

**Knowledge Files:**
- `knowledge/architecture-patterns.json` - Architecture patterns
- `knowledge/design-patterns.json` - Design patterns

**Outputs:**
- Architecture document
- Technical design specification
- Component diagrams
- Data model changes

**Is Mandatory:** Yes

---

### Step 3: Test Planning (TDD Approach)

**Description:** Plan test strategy and generate initial test cases using TDD.

**Actions:**
- Generate test cases from requirements
- Create test structure
- Define test scenarios
- Plan integration tests
- Set up test infrastructure

**Skills Invoked:**
- `tdd` - Apply TDD methodology
- `code-templates` - Generate test templates

**Agents Referenced:**
- `test-generator` - Generate comprehensive tests

**Knowledge Files:**
- `knowledge/tdd-patterns.json` - TDD patterns
- `knowledge/test-patterns.json` - Test structure

**Outputs:**
- Test plan document
- Initial test structure
- Test scenarios defined

**Is Mandatory:** Yes

**Related Workflow:** `tdd-workflow.md.tmpl`

---

### Step 4: Implementation (TDD Cycle)

**Description:** Implement feature following TDD Red-Green-Refactor cycle.

**Actions:**
- Write failing tests (Red)
- Implement minimal code to pass (Green)
- Refactor while tests green (Refactor)
- Repeat for each requirement
- Ensure test coverage > 80%

**Skills Invoked:**
- `tdd` - TDD implementation
- `code-templates` - Use implementation templates
- `grounding` - Verify data model

**Knowledge Files:**
- `knowledge/{{STACK}}-patterns.json` - Stack-specific patterns
- `knowledge/design-patterns.json` - Design patterns

**Outputs:**
- Implementation code
- Test suite
- Coverage report

**Is Mandatory:** Yes

**Related Workflow:** `tdd-workflow.md.tmpl`

---

### Step 5: Code Review

**Description:** Review code quality, security, and adherence to standards.

**Actions:**
- Review code correctness
- Check style compliance
- Perform security analysis
- Review performance
- Evaluate design quality
- Generate review feedback

**Skills Invoked:**
- `code-review` - Comprehensive review
- `security-audit` - Security analysis

**Agents Referenced:**
- `code-reviewer` - Orchestrate review

**Outputs:**
- Review report
- Code quality metrics
- Security assessment

**Is Mandatory:** Yes

**Related Workflow:** `code-review-workflow.md.tmpl`

---

### Step 6: Refactoring (if needed)

**Description:** Refactor code based on review feedback and best practices.

**Actions:**
- Address review findings
- Apply refactoring patterns
- Improve code structure
- Reduce complexity
- Ensure tests still pass

**Skills Invoked:**
- `code-review` - Identify improvements
- `code-templates` - Apply refactored patterns

**Outputs:**
- Refactored code
- Updated tests (if needed)

**Is Mandatory:** Conditional (if review finds issues)

**Related Workflow:** `refactoring-workflow.md.tmpl`

---

### Step 7: Documentation

**Description:** Generate comprehensive documentation for the feature.

**Actions:**
- Generate API documentation
- Create usage examples
- Update README
- Write architecture notes
- Generate changelog entry

**Skills Invoked:**
- `documentation-generation` - Generate docs
- `code-templates` - Use doc templates

**Agents Referenced:**
- `documentation-agent` - Orchestrate doc generation

**Outputs:**
- API documentation
- Usage examples
- Updated README
- Changelog entry

**Is Mandatory:** Yes

**Related Workflow:** `documentation-workflow.md.tmpl`

---

### Step 8: Integration Testing

**Description:** Perform integration testing to ensure feature works with existing system.

**Actions:**
- Run integration test suite
- Test feature with existing features
- Verify API contracts
- Test error scenarios
- Validate end-to-end flows

**Skills Invoked:**
- `tdd` - Integration test patterns

**Outputs:**
- Integration test results
- End-to-end test results
- Contract verification

**Is Mandatory:** Yes

---

### Step 9: Deployment Preparation

**Description:** Prepare feature for deployment.

**Actions:**
- Update version numbers
- Generate migration scripts (if needed)
- Update configuration
- Prepare deployment notes
- Create rollback plan

**Skills Invoked:**
- `code-templates` - Generate deployment artifacts

**Outputs:**
- Version updates
- Migration scripts
- Deployment notes
- Rollback plan

**Is Mandatory:** Yes

---

### Step 10: Final Review & Approval

**Description:** Final review before deployment.

**Actions:**
- Review all artifacts
- Verify test coverage
- Check documentation completeness
- Confirm requirements met
- Get approval for deployment

**Outputs:**
- Approval status
- Deployment readiness checklist

**Is Mandatory:** Yes

---

## Workflow Integration

This workflow integrates with other workflows:

1. **TDD Workflow** - Steps 3-4 use TDD methodology
2. **Code Review Workflow** - Step 5 performs code review
3. **Refactoring Workflow** - Step 6 refactors if needed
4. **Documentation Workflow** - Step 7 generates documentation

## MCP Tools Reference

| Tool | Purpose | When Used |
|------|---------|-----------|
| `atlassian-getJiraIssue` | Fetch ticket details | Step 1 |
| `atlassian-getConfluencePage` | Fetch specifications | Step 1 |
| `atlassian-addCommentToJiraIssue` | Update ticket | Throughout |
| `atlassian-transitionJiraIssue` | Update ticket status | Step 10 |
| `deepwiki-ask_question` | Query repository docs | Steps 2, 7 |
| `deepwiki-read_wiki_contents` | Read documentation | Steps 2, 7 |

## Skills Reference

| Skill | Purpose | Steps |
|-------|---------|-------|
| `requirements-gathering` | Extract requirements | 1 |
| `code-analysis` | Analyze architecture | 2 |
| `grounding` | Verify data model | 2, 4 |
| `tdd` | TDD implementation | 3, 4, 8 |
| `code-templates` | Generate code/docs | 3, 4, 6, 7, 9 |
| `code-review` | Review code quality | 5, 6 |
| `security-audit` | Security analysis | 5 |
| `documentation-generation` | Generate docs | 7 |

## Agents Reference

| Agent | Purpose | Steps |
|-------|---------|-------|
| `test-generator` | Generate tests | 3 |
| `code-reviewer` | Review code | 5 |
| `documentation-agent` | Generate docs | 7 |

## Output Artifacts

| Artifact | Location | Purpose |
|----------|----------|---------|
| Requirements doc | `docs/{{FEATURE_NAME}}_requirements.md` | Requirements |
| Architecture doc | `docs/{{FEATURE_NAME}}_architecture.md` | Architecture |
| Test plan | `docs/{{FEATURE_NAME}}_test_plan.md` | Test strategy |
| Implementation | `src/{{MODULE_NAME}}/` | Feature code |
| Tests | `tests/unit/{{MODULE_NAME}}/` | Test suite |
| API docs | `docs/api/{{FEATURE_NAME}}.md` | API reference |
| Usage examples | `docs/examples/{{FEATURE_NAME}}/` | Examples |
| Changelog | `CHANGELOG.md` | Version history |

## Quality Gates

### Before Implementation
- [ ] Requirements clearly defined
- [ ] Architecture designed
- [ ] Test plan created
- [ ] Dependencies identified

### During Implementation
- [ ] Tests written before code
- [ ] Test coverage > 80%
- [ ] All tests passing
- [ ] Code follows style guide

### Before Review
- [ ] Feature complete
- [ ] Tests passing
- [ ] Documentation started
- [ ] No known bugs

### Before Deployment
- [ ] Code reviewed and approved
- [ ] All tests passing
- [ ] Documentation complete
- [ ] Integration tests passing
- [ ] Security reviewed
- [ ] Performance acceptable

## Fallback Procedures

| Condition | Action |
|-----------|--------|
| Requirements unclear | Request clarification |
| Ticket fetch fails | Request manual requirements |
| Architecture conflicts | Escalate to architecture review |
| Tests fail | Debug and fix incrementally |
| Review finds critical issues | Refactor before proceeding |
| Integration tests fail | Fix integration issues |
| Documentation incomplete | Complete before deployment |

## Example Session

```
User: Implement user authentication feature from ticket AUTH-123

Agent:
1. Requirements Analysis...
   - Fetched ticket AUTH-123
   - Requirements: JWT-based auth, password hashing, refresh tokens
2. Architecture & Design...
   - Designed auth service architecture
   - Planned JWT token flow
3. Test Planning...
   - Generated 25 test cases
   - Planned integration tests
4. Implementation (TDD)...
   - Red: Created failing tests
   - Green: Implemented auth service
   - Refactor: Improved code structure
   - Coverage: 92%
5. Code Review...
   - Found 2 style issues (low)
   - Security review passed
   - Approved with minor suggestions
6. Refactoring...
   - Addressed style issues
7. Documentation...
   - Generated API docs
   - Created usage examples
   - Updated README
8. Integration Testing...
   - All integration tests passing
9. Deployment Preparation...
   - Updated version to 1.2.0
   - Created migration script
10. Final Review...
    - All checks passed
    - Ready for deployment

[Outputs complete feature implementation]
```

## Best Practices

- **Follow TDD** - Write tests before implementation
- **Incremental development** - Build feature incrementally
- **Regular reviews** - Review code frequently
- **Document as you go** - Don't leave docs for the end
- **Test thoroughly** - Unit, integration, and E2E tests
- **Maintain quality** - Don't compromise on code quality
- **Communicate** - Update tickets and team regularly

## Related Workflows

- `tdd-workflow.md.tmpl` - TDD implementation
- `code-review-workflow.md.tmpl` - Code quality review
- `refactoring-workflow.md.tmpl` - Code improvements
- `documentation-workflow.md.tmpl` - Documentation generation

## References

- `patterns/skills/feature-workflow.json` - Feature workflow skill
- `patterns/skills/tdd.json` - TDD skill
- `patterns/skills/code-review.json` - Code review skill
- `knowledge/architecture-patterns.json` - Architecture patterns
- `knowledge/design-patterns.json` - Design patterns
- `knowledge/tdd-patterns.json` - TDD patterns
