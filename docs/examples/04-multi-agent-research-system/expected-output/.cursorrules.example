# Research Agent Team - Cursor Agent Rules
# Generated by Cursor Agent Factory
# 5-Layer Architecture with Comprehensive Multi-Agent Enforcement

# ═══════════════════════════════════════════════════════════════════════════════
# LAYER 0: INTEGRITY & LOGIC (Axioms)
# ═══════════════════════════════════════════════════════════════════════════════

## Core Axioms (Immutable)

### A1: Verifiability
All agent outputs must be verifiable:
- Research claims cite sources
- Analysis steps are traceable
- Handoffs are logged in LangSmith

### A2: User Primacy
User goals drive coordination:
- Research task guides all agents
- User can override supervisor decisions
- Final output serves user intent

### A3: Transparency
Agent coordination is explainable:
- Supervisor explains routing decisions
- Handoff reasons documented
- Agent reasoning visible in traces

### A4: Non-Harm
No harmful content generation:
- Filter harmful research requests
- Verify sources for misinformation
- Flag potentially harmful conclusions

### A5: Consistency
Uniform agent behavior:
- All agents follow prompt templates
- Handoff protocol is consistent
- State schema enforced

## Optional Axioms (Selected)

### A8: Collaboration
Effective agent coordination:
- Clear handoff protocols
- Shared state management
- Conflict resolution procedures
- Team synergy optimization

### A10: Learning
Continuous system improvement:
- Track coordination efficiency
- Identify handoff bottlenecks
- Improve prompts from feedback
- Document effective patterns

# ═══════════════════════════════════════════════════════════════════════════════
# LAYER 1: PURPOSE
# ═══════════════════════════════════════════════════════════════════════════════

## Mission
To automate complex research tasks through coordinated specialist agents working
under intelligent supervision.

## Primary Stakeholders
AI engineers building multi-agent systems and researchers needing automated
research pipelines.

## Success Criteria
Complete multi-step research tasks with quality-reviewed outputs from
coordinated agent teams.

# ═══════════════════════════════════════════════════════════════════════════════
# LAYER 2: PRINCIPLES
# ═══════════════════════════════════════════════════════════════════════════════

## Quality Standards

### Agent Output Quality
- All research grounded in sources
- Analysis logically consistent
- Writing clear and structured
- Criticism constructive and actionable

### Coordination Quality
- Handoffs preserve context
- State transitions are valid
- No lost information between agents
- Efficient routing by supervisor

## Collaboration Principles (A8)

### Handoff Protocol
1. Summarize work completed
2. Pass relevant state fields
3. Provide context for next agent
4. Log handoff in trace

### Conflict Resolution
- Supervisor arbitrates disagreements
- Critic feedback prioritized
- User can override any decision

# ═══════════════════════════════════════════════════════════════════════════════
# LAYER 3: METHODOLOGY & ENFORCEMENT
# ═══════════════════════════════════════════════════════════════════════════════

## Development Methodology: Research & Development

### Exploration/Exploitation
- 70% Exploration: New coordination patterns, agent improvements
- 30% Exploitation: Production fixes, optimizations

### Experiment Cycle
- Hypothesis about coordination improvement
- Implement and test
- Measure via LangSmith metrics
- Document learnings

## Enforcement Patterns (Active)

### E1: Quality Enforcement
- Agent output validation
- Source verification for research
- Coherence check for analysis
- Grammar/clarity check for writing

### E2: Coordination Enforcement
- Handoff protocol compliance
- State schema validation
- Routing decision logging
- Cycle detection (prevent infinite loops)

### E3: Integrity Enforcement
- A8 collaboration verification
- Purpose alignment check
- Transparency in decisions

## Practice Patterns (Active)

### Daily Practices
- Review LangSmith traces
- Identify coordination bottlenecks
- Document improvement ideas

### Craft Practices
- Prompt iteration
- Agent capability tuning
- Handoff protocol refinement

# ═══════════════════════════════════════════════════════════════════════════════
# LAYER 4: TECHNICAL
# ═══════════════════════════════════════════════════════════════════════════════

## Technology Stack

### Orchestration
- LangGraph 0.1+ (required)
- State machines for coordination

### Agent Framework
- LangChain 0.2+
- Tool integration

### LLM Configuration
- Supervisor: GPT-4 (complex reasoning)
- Workers: GPT-3.5-turbo (cost optimization)
- Critic: GPT-4 (quality assessment)

### Tracing
- LangSmith (required)
- All agent calls traced

## Agent Team

### Supervisor Agent
- Role: Task coordination and routing
- Input: User research request
- Output: Task decomposition, agent assignments
- LLM: GPT-4

### Researcher Agent
- Role: Information gathering
- Input: Research questions
- Output: Raw research data with sources
- LLM: GPT-3.5-turbo

### Analyst Agent
- Role: Data synthesis
- Input: Research data
- Output: Structured analysis
- LLM: GPT-3.5-turbo

### Writer Agent
- Role: Report generation
- Input: Analysis
- Output: Draft report
- LLM: GPT-3.5-turbo

### Critic Agent
- Role: Quality review
- Input: Draft report
- Output: Feedback or approval
- LLM: GPT-4

## State Schema

```python
class ResearchState(TypedDict):
    messages: Sequence[BaseMessage]
    task: str                    # Original research request
    research_data: str           # From researcher
    analysis: str                # From analyst
    draft: str                   # From writer
    feedback: str                # From critic
    final_output: str            # Approved output
    current_agent: str           # Current processing agent
    iteration: int               # Revision count
```

# ═══════════════════════════════════════════════════════════════════════════════
# AGENT REGISTRY
# ═══════════════════════════════════════════════════════════════════════════════

## Available Cursor Agents

### code-reviewer
- Focus: Multi-agent code quality, coordination patterns
- Skills: agent-coordination, grounding

### test-generator
- Focus: Agent tests, graph tests, coordination tests
- Skills: tdd

### documentation-agent
- Focus: Multi-agent architecture documentation
- Skills: documentation

### explorer
- Focus: Research multi-agent patterns
- Skills: research

## Available Skills

### agent-coordination
- Purpose: Design and implement agent handoffs
- Patterns: Supervisor/worker, sequential, parallel

### task-decomposition
- Purpose: Break complex tasks into agent subtasks
- Output: Task list with agent assignments

### consensus-building
- Purpose: Resolve conflicts between agents
- Methods: Voting, arbitration, synthesis

### grounding
- Purpose: Verify outputs against sources
- Application: Research verification

### tdd
- Purpose: Test-driven multi-agent development
- Levels: Unit (agent), Integration (graph), E2E

# ═══════════════════════════════════════════════════════════════════════════════
# KNOWLEDGE FILES
# ═══════════════════════════════════════════════════════════════════════════════

## Reference Data
- knowledge/multi-agent-patterns.json - Coordination patterns
- knowledge/agent-handoffs.json - Handoff protocols
- knowledge/coordination-strategies.json - Coordination strategies
- knowledge/langgraph-workflows.json - LangGraph patterns

# ═══════════════════════════════════════════════════════════════════════════════
# MCP SERVER INTEGRATION
# ═══════════════════════════════════════════════════════════════════════════════

## DeepWiki MCP
- Purpose: Research multi-agent implementations
- Use: Study LangGraph examples, coordination patterns

# ═══════════════════════════════════════════════════════════════════════════════
# BEHAVIOR RULES
# ═══════════════════════════════════════════════════════════════════════════════

## Coordination Rules
1. Supervisor makes all routing decisions
2. Handoffs must preserve required state
3. Maximum 3 revision cycles
4. Critic can escalate to supervisor

## Agent Rules
1. Each agent has single responsibility
2. Agents communicate only through state
3. All outputs go through critic
4. No direct agent-to-agent calls

## Quality Rules
1. Research must cite sources
2. Analysis must be logical
3. Writing must be clear
4. Criticism must be constructive
