[pytest]
# Cursor Agent Factory - Pytest Configuration
# Optimized for fast error detection with intelligent test packaging

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Default options for local development
addopts = 
    -v
    --tb=short
    --strict-markers

# Custom markers for intelligent test packaging
markers =
    fast: Fast tests (< 1 second) - run first for quick feedback
    medium: Medium tests (1-10 seconds) - run second
    slow: Slow tests (> 10 seconds) - run last, includes subprocess tests
    integration: Integration tests requiring subprocess execution
    unit: Unit tests - fast, in-process
    validation: Validation tests - fast, schema checking
    cli: CLI tests - slower, subprocess based
    generation: Generation tests - slower, file I/O heavy
    quickstart: QuickStart tests - slowest, full generation workflow

# Timeout settings to prevent hanging tests
timeout = 120
timeout_method = thread

# Parallel execution settings (used with -n auto)
# Workers will be allocated based on CPU cores

# Coverage configuration
[coverage:run]
source = scripts,cli
branch = True
omit = 
    tests/*
    */__pycache__/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
