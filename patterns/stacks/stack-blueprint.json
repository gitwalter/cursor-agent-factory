{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Technology Stack Blueprint Schema",
  "description": "Schema for defining technology stack blueprints in the Cursor Agent Factory",
  "version": "1.0.0",
  "type": "object",
  "required": ["metadata", "stack", "agents", "skills"],
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Blueprint metadata",
      "required": ["blueprintId", "blueprintName", "description"],
      "properties": {
        "blueprintId": {
          "type": "string",
          "description": "Unique identifier for this blueprint",
          "pattern": "^[a-z][a-z0-9-]*$"
        },
        "blueprintName": {
          "type": "string",
          "description": "Human-readable blueprint name"
        },
        "description": {
          "type": "string",
          "description": "Brief description of this stack"
        },
        "version": {
          "type": "string",
          "description": "Blueprint version"
        },
        "author": {
          "type": "string",
          "description": "Blueprint author"
        },
        "tags": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Tags for categorization"
        }
      }
    },
    "stack": {
      "type": "object",
      "description": "Technology stack configuration",
      "required": ["primaryLanguage"],
      "properties": {
        "primaryLanguage": {
          "type": "string",
          "description": "Primary programming language"
        },
        "secondaryLanguages": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Secondary languages"
        },
        "frameworks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "version": {"type": "string"},
              "purpose": {"type": "string"}
            }
          },
          "description": "Frameworks used"
        },
        "databases": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {"type": "string"},
              "name": {"type": "string"},
              "purpose": {"type": "string"}
            }
          },
          "description": "Database systems"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "purpose": {"type": "string"}
            }
          },
          "description": "Development tools"
        },
        "styleGuides": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "description": {"type": "string"},
              "reference": {"type": "string"}
            }
          },
          "description": "Available style guides"
        }
      }
    },
    "agents": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "patternId": {
            "type": "string",
            "description": "Reference to agent pattern"
          },
          "customizations": {
            "type": "object",
            "description": "Stack-specific customizations"
          },
          "required": {
            "type": "boolean",
            "description": "Whether this agent is required for this stack"
          }
        }
      },
      "description": "Agents to include in generated project"
    },
    "skills": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "patternId": {
            "type": "string",
            "description": "Reference to skill pattern"
          },
          "customizations": {
            "type": "object",
            "description": "Stack-specific customizations"
          },
          "required": {
            "type": "boolean",
            "description": "Whether this skill is required for this stack"
          }
        }
      },
      "description": "Skills to include in generated project"
    },
    "knowledge": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "filename": {"type": "string"},
          "description": {"type": "string"},
          "schema": {"type": "string"}
        }
      },
      "description": "Knowledge files to generate"
    },
    "templates": {
      "type": "object",
      "description": "Template configuration",
      "properties": {
        "codeTemplates": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "patternId": {"type": "string"},
              "directory": {"type": "string"}
            }
          }
        },
        "documentTemplates": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "patternId": {"type": "string"},
              "directory": {"type": "string"}
            }
          }
        },
        "promptTemplates": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "patternId": {"type": "string"},
              "directory": {"type": "string"}
            }
          }
        }
      }
    },
    "workflows": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "patternId": {"type": "string"},
          "customizations": {"type": "object"}
        }
      },
      "description": "Workflows to include"
    },
    "mcpServers": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "url": {"type": "string"},
          "purpose": {"type": "string"},
          "required": {"type": "boolean"}
        }
      },
      "description": "Recommended MCP servers"
    },
    "projectStructure": {
      "type": "object",
      "description": "Generated project structure",
      "properties": {
        "directories": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "path": {"type": "string"},
              "purpose": {"type": "string"}
            }
          }
        },
        "files": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "path": {"type": "string"},
              "templateId": {"type": "string"},
              "purpose": {"type": "string"}
            }
          }
        }
      }
    },
    "cursorrules": {
      "type": "object",
      "description": "Configuration for generated .cursorrules",
      "properties": {
        "variables": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "description": {"type": "string"},
              "default": {"type": "string"}
            }
          }
        },
        "rules": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "description": {"type": "string"},
              "content": {"type": "string"}
            }
          }
        }
      }
    }
  },
  "examples": [
    {
      "metadata": {
        "blueprintId": "python-fastapi",
        "blueprintName": "Python FastAPI Blueprint",
        "description": "REST API development with Python and FastAPI",
        "version": "1.0.0",
        "tags": ["python", "api", "rest", "fastapi"]
      },
      "stack": {
        "primaryLanguage": "python",
        "frameworks": [
          {"name": "FastAPI", "version": "0.100+", "purpose": "Web framework"},
          {"name": "SQLAlchemy", "version": "2.0+", "purpose": "ORM"},
          {"name": "Pydantic", "version": "2.0+", "purpose": "Validation"}
        ],
        "databases": [
          {"type": "sql", "name": "PostgreSQL", "purpose": "Primary database"}
        ],
        "styleGuides": [
          {"name": "pep8", "description": "PEP 8 Style Guide", "reference": "https://pep8.org"}
        ]
      },
      "agents": [
        {"patternId": "code-reviewer", "required": true},
        {"patternId": "test-generator", "required": true}
      ],
      "skills": [
        {"patternId": "bugfix-workflow", "required": true},
        {"patternId": "feature-workflow", "required": true}
      ],
      "mcpServers": [
        {"name": "atlassian", "url": "https://mcp.atlassian.com/v1/sse", "purpose": "Jira/Confluence", "required": false}
      ]
    }
  ]
}
