{
  "metadata": {
    "patternId": "bdd",
    "patternName": "Behavior-Driven Development Skill",
    "category": "testing",
    "stackAgnostic": true,
    "description": "Stakeholder-readable executable specifications using Gherkin syntax",
    "composable": true,
    "complementsSkill": "tdd"
  },
  "frontmatter": {
    "name": "bdd",
    "description": "Behavior-driven development with Gherkin feature files and step definitions",
    "type": "skill",
    "knowledge": ["bdd-patterns.json", "test-patterns.json"],
    "templates": ["templates/bdd/"]
  },
  "sections": {
    "title": "Behavior-Driven Development Skill",
    "introduction": "Implements behavior-driven development methodology with Gherkin feature files for stakeholder-readable executable specifications.",
    "whenToUse": [
      "When stakeholders need to validate and review requirements",
      "When building living documentation from specifications",
      "When bridging communication between business and development",
      "When acceptance criteria need to be executable",
      "When collaborative specification is valuable"
    ],
    "process": [
      {
        "step": 1,
        "name": "Discovery",
        "description": "Collaborative session to understand the behavior",
        "actions": [
          "Conduct Three Amigos session (Business, Dev, Test)",
          "Identify user stories and acceptance criteria",
          "Extract concrete examples of behavior",
          "Create example mapping with rules and questions"
        ]
      },
      {
        "step": 2,
        "name": "Formulation",
        "description": "Write Gherkin scenarios from examples",
        "actions": [
          "Create feature file with business-readable description",
          "Write scenarios using Given-When-Then format",
          "Use declarative style (what, not how)",
          "Add Scenario Outlines for data-driven tests"
        ]
      },
      {
        "step": 3,
        "name": "Automation",
        "description": "Implement step definitions",
        "actions": [
          "Generate step definition stubs from feature file",
          "Implement Given steps (setup/preconditions)",
          "Implement When steps (actions)",
          "Implement Then steps (assertions)",
          "Create reusable step library"
        ]
      },
      {
        "step": 4,
        "name": "Implementation",
        "description": "Build the feature to pass scenarios",
        "actions": [
          "Implement minimum code to pass scenario",
          "Run feature file to verify",
          "Iterate until all scenarios pass"
        ]
      },
      {
        "step": 5,
        "name": "Living Documentation",
        "description": "Generate and maintain documentation",
        "actions": [
          "Generate HTML/PDF reports from features",
          "Review scenarios with stakeholders",
          "Update scenarios as requirements evolve"
        ]
      }
    ],
    "featureStructure": {
      "feature": "High-level business capability description",
      "background": "Common preconditions for all scenarios",
      "scenario": "Concrete example with Given-When-Then",
      "scenarioOutline": "Template for data-driven examples",
      "examples": "Data table for Scenario Outline"
    },
    "gherkinSyntax": {
      "given": "Describes the initial context or preconditions",
      "when": "Describes the action or event that triggers the behavior",
      "then": "Describes the expected outcome or result",
      "and": "Continues the previous step type",
      "but": "Negative continuation of previous step type"
    },
    "scenarioNamingPattern": "{user_role} can {action} when {condition}",
    "importantRules": [
      "Declarative not imperative - Describe WHAT behavior, not HOW to test",
      "One scenario one behavior - Each scenario tests single business rule",
      "Business language - Use domain terminology, not technical terms",
      "Reusable steps - Build a step library for consistency",
      "Independent scenarios - Scenarios should not depend on each other",
      "Background for shared setup - Use Background for common Given steps",
      "Avoid UI details - Keep scenarios at business level, not UI interaction"
    ],
    "antiPatterns": [
      {
        "name": "Imperative scenarios",
        "problem": "Scenarios that describe click-by-click UI interactions",
        "solution": "Use declarative business-level steps"
      },
      {
        "name": "Incidental details",
        "problem": "Scenarios with unnecessary technical details",
        "solution": "Focus only on behavior-relevant information"
      },
      {
        "name": "Too many scenarios",
        "problem": "Feature files with 50+ scenarios",
        "solution": "Split by business capability or use Scenario Outlines"
      },
      {
        "name": "Coupled scenarios",
        "problem": "Scenarios that depend on previous scenario state",
        "solution": "Make each scenario independent with proper setup"
      }
    ],
    "frameworks": {
      "python": {
        "primary": "behave",
        "alternative": "pytest-bdd",
        "stepLocation": "features/steps/"
      },
      "typescript": {
        "primary": "cucumber-js",
        "stepLocation": "features/step_definitions/"
      },
      "java": {
        "primary": "cucumber-jvm",
        "stepLocation": "src/test/java/steps/"
      },
      "csharp": {
        "primary": "specflow",
        "stepLocation": "Features/Steps/"
      },
      "kotlin": {
        "primary": "cucumber-jvm",
        "stepLocation": "src/test/kotlin/steps/"
      }
    },
    "outputFormat": "Feature files in features/ directory with corresponding step definitions",
    "traceability": {
      "description": "Linking scenarios to implementing unit tests",
      "enabled": true,
      "metadata": {
        "scenarioTags": {
          "@trace-id": "Unique identifier for traceability linking",
          "@implements": "Reference to unit tests that implement this scenario",
          "@generated-from": "Source test if scenario was auto-generated from TDD"
        },
        "comments": "Additional traceability info in scenario comments"
      },
      "example": "@trace-id(abc123) @implements(test_registration.py:test_valid_email)\nScenario: User registers with valid email"
    },
    "translation": {
      "description": "Support for translating to/from TDD tests",
      "modes": {
        "bdd-drives-tdd": {
          "description": "Scenarios drive generation of unit test stubs",
          "workflow": [
            "Write scenario with Given-When-Then",
            "Identify implementation units from steps",
            "Generate unit test stubs with traceability",
            "Implement tests following TDD cycle"
          ]
        },
        "from-tdd": {
          "description": "Scenario generated from existing unit tests",
          "workflow": [
            "Analyze unit test structure",
            "Extract behavior from test names and assertions",
            "Generate declarative Gherkin scenario",
            "Add traceability metadata"
          ]
        }
      },
      "preserveOnSync": [
        "Manual refinements to scenario language",
        "Custom tags and metadata",
        "Additional context comments"
      ]
    }
  },
  "variables": [
    {"name": "{FEATURE_NAME}", "description": "Name of the feature being tested", "required": true},
    {"name": "{FEATURE_DESCRIPTION}", "description": "Business description of the feature", "required": true},
    {"name": "{BDD_FRAMEWORK}", "description": "BDD framework (behave, cucumber, specflow)", "required": true},
    {"name": "{STEP_LANGUAGE}", "description": "Programming language for step definitions", "required": true},
    {"name": "{TRACE_ID}", "description": "Unique traceability identifier", "required": false},
    {"name": "{TESTING_MODE}", "description": "Testing approach mode", "required": false, "default": "layered"}
  ]
}
