{
  "metadata": {
    "patternId": "receive-updates",
    "patternName": "Receive Updates Skill",
    "category": "knowledge",
    "stackAgnostic": true,
    "description": "Receive and apply updates from the Cursor Agent Factory",
    "composable": true,
    "version": "1.0.0"
  },
  "frontmatter": {
    "name": "receive-updates",
    "description": "Fetch and apply updates from the Cursor Agent Factory",
    "type": "skill",
    "knowledge": ["project-info.json"]
  },
  "sections": {
    "title": "Receive Updates Skill",
    "introduction": "This skill enables your project to receive updates from the Cursor Agent Factory, keeping your knowledge files, patterns, and skills current with the latest best practices.",
    "whenToUse": [
      "When you want to check for new knowledge from the Factory",
      "When the Factory releases new patterns or skills",
      "When you want to sync with Factory improvements",
      "Periodically to stay current with best practices"
    ],
    "process": [
      {
        "step": 1,
        "name": "Read Project Origin",
        "description": "Determine Factory connection details",
        "actions": [
          "Read knowledge/project-info.json",
          "Extract blueprint_id, factory_version, update_channel",
          "Build list of installed knowledge versions"
        ]
      },
      {
        "step": 2,
        "name": "Fetch Update Feed",
        "description": "Get available updates from Factory",
        "actions": [
          "Use web search for: 'cursor-agent-factory factory-updates.json github'",
          "Or fetch directly from configured feed_url",
          "Parse the JSON update feed"
        ]
      },
      {
        "step": 3,
        "name": "Compare Versions",
        "description": "Identify applicable updates",
        "actions": [
          "For each update in feed, check applicable_to",
          "Compare update version vs installed version",
          "Filter by channel (stable/latest) preference",
          "Build list of available updates"
        ]
      },
      {
        "step": 4,
        "name": "Apply Updates",
        "description": "Download and install selected updates",
        "actions": [
          "For each approved update:",
          "  - Fetch source file from Factory repository",
          "  - Backup existing file if overwriting",
          "  - Write new file to target location",
          "  - Update project-info.json with new version"
        ]
      }
    ],
    "outputFormat": "### Update Applied\n\n**Update:** {UPDATE_ID}\n**Type:** {TYPE}\n**Version:** {VERSION}\n**Files Updated:**\n- {FILE_1}\n- {FILE_2}\n\n**Next:** Check for more updates or use new knowledge",
    "importantRules": [
      "Always show update details before applying",
      "Backup files before overwriting",
      "Respect user's channel preference",
      "Update project-info.json after each update"
    ],
    "fallbackProcedures": [
      {"condition": "If feed URL unreachable", "action": "Try alternative URL or suggest manual check"},
      {"condition": "If update file missing", "action": "Report error and skip to next update"},
      {"condition": "If version conflict", "action": "Ask user whether to overwrite"}
    ]
  },
  "variables": [
    {"name": "{FEED_URL}", "description": "URL to Factory update feed", "required": false}
  ]
}
