{
  "metadata": {
    "patternId": "tdd",
    "patternName": "Test-Driven Development Skill",
    "category": "testing",
    "stackAgnostic": true,
    "description": "Test-driven development process with Given-When-Then pattern",
    "composable": true,
    "complementsSkill": "bdd"
  },
  "frontmatter": {
    "name": "tdd",
    "description": "Test-driven development following Given-When-Then patterns with BDD traceability support",
    "type": "skill",
    "knowledge": ["test-patterns.json", "test-traceability.json"],
    "templates": ["templates/test-class/"]
  },
  "sections": {
    "title": "Test-Driven Development Skill",
    "introduction": "Implements test-driven development methodology with Given-When-Then structured tests.",
    "whenToUse": [
      "When developing new functionality with TDD approach",
      "When creating unit tests for existing code",
      "When refactoring with test coverage"
    ],
    "process": [
      {
        "step": 1,
        "name": "Understand Requirements",
        "description": "Clarify what needs to be tested",
        "actions": ["Identify behaviors to test", "Define expected outcomes", "List edge cases"]
      },
      {
        "step": 2,
        "name": "Write Failing Test",
        "description": "Create test that fails initially",
        "actions": ["Create test class/file", "Write test method with Given-When-Then", "Assert expected outcome"]
      },
      {
        "step": 3,
        "name": "Implement Code",
        "description": "Write minimum code to pass test",
        "actions": ["Implement just enough to pass", "Run test to verify", "Confirm test passes"]
      },
      {
        "step": 4,
        "name": "Refactor",
        "description": "Improve code while keeping tests green",
        "actions": ["Clean up implementation", "Remove duplication", "Improve naming", "Run tests to verify"]
      },
      {
        "step": 5,
        "name": "Repeat",
        "description": "Continue cycle for next behavior",
        "actions": ["Identify next behavior", "Return to step 2"]
      }
    ],
    "testStructure": {
      "given": "Set up test data and preconditions",
      "when": "Execute the action being tested",
      "then": "Assert the expected outcomes"
    },
    "testNamingPattern": "{method_name}_should_{expected_behavior}_when_{condition}",
    "importantRules": [
      "Write test first - Never write implementation before test",
      "One behavior per test - Each test verifies single behavior",
      "Given-When-Then - Structure all tests clearly",
      "Descriptive names - Test names should describe scenario",
      "Independent tests - Tests should not depend on each other"
    ],
    "traceability": {
      "description": "Linking unit tests to BDD scenarios",
      "enabled": true,
      "metadata": {
        "decorators": {
          "@scenario": "Reference to BDD scenario this test validates",
          "@step": "Specific Given/When/Then step this test covers",
          "@trace-id": "Unique identifier for traceability linking",
          "@generated-from": "Source scenario if test was auto-generated from BDD"
        },
        "docstrings": "Include scenario reference in test docstring"
      },
      "examples": {
        "python": "@pytest.mark.scenario('registration.feature:User registers with valid email')\ndef test_valid_email_creates_account():\n    \"\"\"Validates: When I submit a valid email address\"\"\"\n    pass",
        "java": "@Scenario(feature = \"registration.feature\", name = \"User registers\")\n@Test void testValidEmail() { }"
      }
    },
    "translation": {
      "description": "Support for translating to/from BDD scenarios",
      "modes": {
        "tdd-documents-bdd": {
          "description": "Unit tests generate BDD documentation",
          "workflow": [
            "Analyze test class structure",
            "Extract behaviors from test method names",
            "Identify Given-When-Then from test structure",
            "Generate declarative Gherkin scenarios",
            "Add traceability metadata"
          ]
        },
        "from-bdd": {
          "description": "Test stubs generated from BDD scenarios",
          "workflow": [
            "Parse Gherkin scenario",
            "Identify implementation units from steps",
            "Generate test method stubs",
            "Add traceability back to scenario"
          ]
        }
      },
      "preserveOnSync": [
        "Test implementation code",
        "Custom assertions and helpers",
        "Additional edge case tests"
      ]
    }
  },
  "variables": [
    {"name": "{CLASS_NAME}", "description": "Name of class under test", "required": true},
    {"name": "{TEST_FRAMEWORK}", "description": "Testing framework", "required": true},
    {"name": "{TRACE_ID}", "description": "Unique traceability identifier", "required": false},
    {"name": "{SCENARIO_REF}", "description": "Reference to source BDD scenario", "required": false},
    {"name": "{TESTING_MODE}", "description": "Testing approach mode", "required": false, "default": "tdd-only"}
  ]
}
