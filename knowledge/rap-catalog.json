{
  "metadata": {
    "catalogId": "rap-catalog",
    "catalogName": "RAP Behavior Catalog",
    "description": "Pre-verified RAP behavior definitions, actions, and patterns",
    "version": "1.0.0",
    "lastUpdated": "2025-01-28",
    "sources": ["SAP Help Portal", "RAP Documentation"]
  },
  "implementationTypes": {
    "managed": {
      "description": "SAP manages persistence, locking, authorization, and draft",
      "features": ["Automatic CRUD", "Managed numbering", "ETag handling", "Draft support"],
      "use_when": "New developments with full RAP lifecycle"
    },
    "unmanaged": {
      "description": "Developer implements persistence and business logic",
      "features": ["Custom persistence", "Legacy integration", "Complex validations"],
      "use_when": "Wrapping existing logic or complex scenarios"
    },
    "abstract": {
      "description": "No persistence - for abstract operations",
      "features": ["Action-only BOs", "Utility operations"],
      "use_when": "Operations without entity persistence"
    },
    "projection": {
      "description": "Service projection of base behavior",
      "features": ["Expose subset of operations", "UI-specific behavior"],
      "use_when": "Creating service-specific views of BO"
    }
  },
  "standardActions": {
    "create": {
      "description": "Create new entity instance",
      "trigger": "POST request / CRUD operation",
      "managedBehavior": "Automatically generates key if early/late numbering configured"
    },
    "update": {
      "description": "Update existing entity instance",
      "trigger": "PATCH/PUT request",
      "managedBehavior": "Handles optimistic locking via ETag"
    },
    "delete": {
      "description": "Delete entity instance",
      "trigger": "DELETE request",
      "managedBehavior": "Cascades to compositions if configured"
    }
  },
  "draftActions": {
    "Edit": {
      "description": "Start editing (create draft from active)",
      "type": "draft action"
    },
    "Activate": {
      "description": "Activate draft (save to active)",
      "type": "draft action"
    },
    "Discard": {
      "description": "Discard draft changes",
      "type": "draft action"
    },
    "Resume": {
      "description": "Resume editing draft",
      "type": "draft action"
    },
    "Prepare": {
      "description": "Prepare draft for activation (run validations)",
      "type": "draft determine action"
    }
  },
  "determinationTiming": {
    "on modify": {
      "description": "Runs immediately when triggering operation occurs",
      "use_when": "Need immediate field calculation"
    },
    "on save": {
      "description": "Runs during save phase",
      "use_when": "Final calculations before persistence"
    }
  },
  "validationTiming": {
    "on save": {
      "description": "Runs during save phase for active data",
      "use_when": "Final validation before persistence"
    },
    "draft": {
      "description": "Runs on draft data",
      "use_when": "Early validation during editing"
    }
  },
  "commonPatterns": {
    "numbering": {
      "early": {
        "description": "Key assigned before save",
        "syntax": "early numbering"
      },
      "late": {
        "description": "Key assigned during save",
        "syntax": "late numbering"
      },
      "managed": {
        "description": "SAP assigns UUID key",
        "syntax": "managed with additional save"
      }
    },
    "authorization": {
      "global": {
        "description": "Authorization check at BO level",
        "syntax": "authorization master ( global )"
      },
      "instance": {
        "description": "Authorization check per instance",
        "syntax": "authorization master ( instance )"
      }
    }
  },
  "sideEffectsPatterns": {
    "fieldToField": {
      "description": "Field change triggers other field refresh",
      "syntax": "side effects { field SourceField affects field TargetField; }"
    },
    "fieldToEntity": {
      "description": "Field change triggers entity refresh",
      "syntax": "side effects { field SourceField affects entity _Association; }"
    },
    "actionTrigger": {
      "description": "Action execution triggers refresh",
      "syntax": "side effects { action ActionName affects field TargetField; }"
    }
  },
  "releaseNotes": {
    "strictMode1": "Basic strict mode - deprecated in newer releases",
    "strictMode2": "Enhanced strict mode with additional checks (recommended)"
  }
}
