{
  "metadata": {
    "blueprintId": "quantitative-trading",
    "blueprintName": "Quantitative Trading Blueprint",
    "description": "Algorithmic trading and quantitative finance development with Python backtesting frameworks",
    "version": "1.0.0",
    "author": "Cursor Agent Factory",
    "tags": ["python", "trading", "quantitative", "finance", "backtesting", "algorithms", "ml", "data-science"]
  },
  "stack": {
    "primaryLanguage": "python",
    "frameworks": [
      {"name": "pandas", "version": "2.x", "purpose": "Data manipulation and analysis"},
      {"name": "numpy", "version": "1.26+", "purpose": "Numerical computing"},
      {"name": "vectorbt", "version": "0.26+", "purpose": "Vectorized backtesting"},
      {"name": "backtrader", "version": "1.9+", "purpose": "Event-driven backtesting"},
      {"name": "pandas-ta", "version": "0.3+", "purpose": "Technical analysis indicators"},
      {"name": "scikit-learn", "version": "1.4+", "purpose": "Machine learning models"},
      {"name": "PyTorch", "version": "2.x", "purpose": "Deep learning models", "optional": true},
      {"name": "FastAPI", "version": "0.115+", "purpose": "API endpoints for strategies"}
    ],
    "databases": [
      {"type": "sql", "name": "PostgreSQL", "purpose": "Historical data storage"},
      {"type": "sql", "name": "TimescaleDB", "purpose": "Time-series data", "optional": true},
      {"type": "sql", "name": "SQLite", "purpose": "Development/backtesting"},
      {"type": "nosql", "name": "Redis", "purpose": "Real-time data caching", "optional": true}
    ],
    "dataSources": [
      {"name": "yfinance", "purpose": "Yahoo Finance historical data"},
      {"name": "ccxt", "purpose": "Cryptocurrency exchange data"},
      {"name": "alpaca-trade-api", "purpose": "US equities (live trading ready)"},
      {"name": "polygon-api-client", "purpose": "Real-time market data", "optional": true}
    ],
    "tools": [
      {"name": "pytest", "purpose": "Testing"},
      {"name": "ruff", "purpose": "Linting"},
      {"name": "black", "purpose": "Formatting"},
      {"name": "mypy", "purpose": "Type checking"},
      {"name": "jupyter", "purpose": "Research and analysis"},
      {"name": "matplotlib", "purpose": "Visualization"},
      {"name": "plotly", "purpose": "Interactive charts"}
    ],
    "styleGuides": [
      {"name": "pep8", "description": "PEP 8 Style Guide", "reference": "https://pep8.org"},
      {"name": "google", "description": "Google Python Style", "reference": "https://google.github.io/styleguide/pyguide.html"}
    ]
  },
  "agents": [
    {"patternId": "code-reviewer", "required": true, "customizations": {"skills": ["clean-code-review", "grounding"], "focus": "quantitative-finance"}},
    {"patternId": "test-generator", "required": true, "customizations": {"skills": ["tdd", "backtesting-validation"]}},
    {"patternId": "strategy-analyst", "required": true, "customizations": {"focus": "strategy-performance"}},
    {"patternId": "explorer", "required": false, "customizations": {"focus": "trading-strategies"}}
  ],
  "skills": [
    {"patternId": "trading-strategy", "required": true},
    {"patternId": "backtesting-validation", "required": true},
    {"patternId": "risk-analysis", "required": true},
    {"patternId": "bugfix-workflow", "required": true},
    {"patternId": "feature-workflow", "required": true},
    {"patternId": "grounding", "required": true},
    {"patternId": "tdd", "required": true, "default": true},
    {"patternId": "code-templates", "required": true}
  ],
  "testingApproach": {
    "modes": ["tdd-only", "backtest-driven", "walk-forward", "monte-carlo"],
    "default": "backtest-driven",
    "frameworks": {
      "tdd": "pytest",
      "backtest": "vectorbt",
      "statistical": "scipy.stats"
    },
    "modeDescriptions": {
      "tdd-only": "Unit tests for strategy components",
      "backtest-driven": "Historical backtests validate strategy logic",
      "walk-forward": "Rolling window validation for robustness",
      "monte-carlo": "Statistical validation with simulations"
    },
    "validation": {
      "outOfSample": "Required - 20% holdout minimum",
      "walkForward": "Recommended - 12 rolling windows",
      "monteCarlo": "Optional - 1000 simulations for statistics"
    }
  },
  "knowledge": [
    {"filename": "trading-patterns.json", "description": "Algorithmic trading strategy patterns"},
    {"filename": "quantitative-finance.json", "description": "Risk metrics, portfolio theory, financial math"},
    {"filename": "market-data-patterns.json", "description": "Data handling, feature engineering"},
    {"filename": "backtesting-patterns.json", "description": "Backtesting methodologies"},
    {"filename": "risk-management.json", "description": "Position sizing, stop-loss, portfolio risk"},
    {"filename": "naming-conventions.json", "description": "Python naming conventions"}
  ],
  "templates": {
    "codeTemplates": [
      {"category": "momentum-strategy", "directory": "templates/trading/strategies/"},
      {"category": "mean-reversion-strategy", "directory": "templates/trading/strategies/"},
      {"category": "ml-strategy", "directory": "templates/trading/strategies/"},
      {"category": "backtest-runner", "directory": "templates/trading/backtesting/"},
      {"category": "walk-forward", "directory": "templates/trading/backtesting/"},
      {"category": "data-fetcher", "directory": "templates/trading/data/"},
      {"category": "feature-engineering", "directory": "templates/trading/data/"},
      {"category": "position-sizer", "directory": "templates/trading/risk/"},
      {"category": "risk-calculator", "directory": "templates/trading/risk/"},
      {"category": "test-class", "directory": "templates/python/test/"}
    ],
    "documentTemplates": [
      {"name": "strategy_report.md", "directory": "templates/docs/"},
      {"name": "backtest_analysis.md", "directory": "templates/docs/"},
      {"name": "risk_assessment.md", "directory": "templates/docs/"}
    ]
  },
  "workflows": [
    {"patternId": "strategy-development", "customizations": {}},
    {"patternId": "backtest-validation", "customizations": {}},
    {"patternId": "jira-bugfix", "customizations": {}}
  ],
  "mcpServers": [
    {"name": "deepwiki", "url": "https://mcp.deepwiki.com/mcp", "purpose": "Financial libraries documentation", "required": false},
    {"name": "atlassian", "url": "https://mcp.atlassian.com/v1/sse", "purpose": "Jira/Confluence", "required": false}
  ],
  "projectStructure": {
    "directories": [
      {"path": ".cursor/agents/", "purpose": "AI agent definitions"},
      {"path": ".cursor/skills/", "purpose": "Reusable skills"},
      {"path": "strategies/", "purpose": "Trading strategy implementations"},
      {"path": "strategies/momentum/", "purpose": "Momentum-based strategies"},
      {"path": "strategies/mean_reversion/", "purpose": "Mean reversion strategies"},
      {"path": "strategies/ml/", "purpose": "Machine learning strategies"},
      {"path": "data/", "purpose": "Data fetching and processing"},
      {"path": "data/sources/", "purpose": "Data source connectors"},
      {"path": "data/features/", "purpose": "Feature engineering"},
      {"path": "backtesting/", "purpose": "Backtesting framework"},
      {"path": "backtesting/engines/", "purpose": "Backtest engines"},
      {"path": "backtesting/reports/", "purpose": "Backtest results"},
      {"path": "risk/", "purpose": "Risk management"},
      {"path": "execution/", "purpose": "Order execution (paper/live)"},
      {"path": "models/", "purpose": "ML models"},
      {"path": "notebooks/", "purpose": "Research notebooks"},
      {"path": "tests/", "purpose": "Test files"},
      {"path": "tests/strategies/", "purpose": "Strategy tests"},
      {"path": "tests/backtesting/", "purpose": "Backtest validation tests"},
      {"path": "knowledge/", "purpose": "Reference data"},
      {"path": "docs/", "purpose": "Documentation"},
      {"path": "config/", "purpose": "Configuration files"}
    ],
    "files": [
      {"path": ".cursorrules", "purpose": "Agent behavior rules"},
      {"path": "README.md", "purpose": "Project documentation"},
      {"path": "pyproject.toml", "purpose": "Python project config"},
      {"path": "requirements.txt", "purpose": "Dependencies"},
      {"path": "config/settings.yaml", "purpose": "Strategy settings"},
      {"path": ".env.example", "purpose": "Environment variables template"}
    ]
  },
  "cursorrules": {
    "variables": [
      {"name": "PYTHON_PATH", "description": "Python executable path", "default": "C:\\App\\Anaconda\\python.exe"},
      {"name": "STYLE_GUIDE", "description": "Coding style", "default": "google"},
      {"name": "BACKTEST_ENGINE", "description": "Default backtesting engine", "default": "vectorbt"},
      {"name": "RISK_FREE_RATE", "description": "Risk-free rate for calculations", "default": "0.05"}
    ],
    "rules": [
      {"name": "Type Hints", "description": "Always use type hints for function parameters and returns"},
      {"name": "Docstrings", "description": "Use Google-style docstrings with strategy parameters documented"},
      {"name": "Risk First", "description": "All strategies MUST include position sizing and stop-loss logic"},
      {"name": "No Look-Ahead Bias", "description": "Never use future data in signal generation"},
      {"name": "Transaction Costs", "description": "Always include realistic transaction costs in backtests"},
      {"name": "Out-of-Sample Testing", "description": "Reserve 20% of data for out-of-sample validation"},
      {"name": "Reproducibility", "description": "Set random seeds and log all parameters for reproducibility"},
      {"name": "Live Trading Safety", "description": "Require explicit confirmation before any live trading execution"}
    ]
  },
  "riskManagement": {
    "required": [
      "Position sizing based on volatility or fixed fraction",
      "Maximum position size limits",
      "Stop-loss on all positions",
      "Maximum drawdown limits",
      "Correlation limits for portfolio strategies"
    ],
    "metrics": [
      "Sharpe Ratio",
      "Sortino Ratio",
      "Maximum Drawdown",
      "Calmar Ratio",
      "Win Rate",
      "Profit Factor",
      "Expected Value per Trade"
    ]
  },
  "backtestingRequirements": {
    "validation": [
      "Walk-forward analysis with 12+ windows",
      "Out-of-sample testing (20% holdout)",
      "Monte Carlo simulation (1000+ runs)",
      "Sensitivity analysis on parameters"
    ],
    "realism": [
      "Include transaction costs (slippage + commission)",
      "Account for market impact on large orders",
      "Use bid-ask spreads when available",
      "Handle corporate actions (splits, dividends)"
    ]
  }
}
